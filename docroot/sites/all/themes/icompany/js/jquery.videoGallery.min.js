!function(a){a.fn.videoGallery=function(f){function ae(a){if(!g||Zb)return!1;if(le)return!1;if(!Xd){var b;if(p){var c=a.originalEvent.touches;if(!(c&&c.length>0))return!1;b=c[0]}else b=a,a.preventDefault();Xd=!0,k.bind(n,function(a){be(a)}),k.bind(o,function(a){ce(a)})}return!1}function be(a){var b;if(p){var c;if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else{if(!a.originalEvent.changedTouches||!a.originalEvent.changedTouches.length)return!1;c=a.originalEvent.changedTouches}if(c.length>1)return!1;b=c[0],a.preventDefault()}else b=a,a.preventDefault();return de(b.pageX),!1}function ce(a){if(Xd){Xd=!1,k.unbind(n).unbind(o);var b;if(p){var c;if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else{if(!a.originalEvent.changedTouches||!a.originalEvent.changedTouches.length)return!1;c=a.originalEvent.changedTouches}if(c.length>1)return!1;b=c[0],a.preventDefault()}else b=a,a.preventDefault();de(b.pageX)}return!1}function de(a){var b,c,d,e;if(e=a-N.offset().left,0>e?e=0:e>$d&&(e=$d),b=Math.max(0,Math.min(1,e/$d)),"local"==Cd)if(P.css("width",e+"px"),v){if(bd){c=b*Fd.duration,d=c.toFixed(1);try{Fd.currentTime=d}catch(f){}}}else"undefined"!=typeof wg(X)&&wg(X).pb_seek(b);else("youtube_single"==Cd||"youtube_playlist"==Cd)&&(v?Ic&&(c=b*Ic.getDuration(),d=c.toFixed(1),Ic.seek(d)):"undefined"!=typeof wg(X)&&wg(X).pb_seek(b))}function fe(){return bd?(ee.css("display","block"),M.bind("mousemove",he).bind("mouseout",ge),k.bind("mouseout",ge),void 0):!1}function ge(){return bd?(ee.css("display","none"),M.unbind("mousemove",he).unbind("mouseout",ge),k.unbind("mouseout",ge),void 0):!1}function he(a){var b=a.pageX-N.offset().left;0>b?b=0:b>$d&&(b=$d);var c=parseInt(a.pageX-M.offset().left-ee.width()/2,10);ee.css("left",c+"px");var e,f,d=Math.max(0,Math.min(1,b/$d));if("local"==Cd)if(v)e=d*Fd.duration,f=Fd.duration;else{if("undefined"==typeof wg(X))return;f=wg(X).pb_getFlashDuration(),e=d*f}else if("youtube_single"==Cd||"youtube_playlist"==Cd)if(v)e=d*Ic.getDuration(),f=Ic.getDuration();else{if("undefined"==typeof wg(X))return;f=wg(X).pb_getFlashDuration(),e=d*f}ee.find("p").html(fh(e)+" | "+gh(f))}function qe(){oe&&clearTimeout(oe),Q.css("display","none"),ne=!1}function re(){oe&&clearTimeout(oe),ne?(Q.css("display","none"),ne=!1):(Q.css("display","block"),ne=!0,oe=setTimeout(qe,pe))}function se(a){if(!g||Zb)return!1;if(Xd)return!1;if(!le){var b;if(p){var c=a.originalEvent.touches;if(!(c&&c.length>0))return!1;b=c[0]}else b=a,a.preventDefault();le=!0,k.bind(n,function(a){te(a)}).bind(o,function(a){ue(a)})}return!1}function te(a){var b;if(p){var c;if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else{if(!a.originalEvent.changedTouches||!a.originalEvent.changedTouches.length)return!1;c=a.originalEvent.changedTouches}if(c.length>1)return!1;b=c[0],a.preventDefault()}else b=a,a.preventDefault();return ve(b.pageY),!1}function ue(a){if(le){le=!1,k.unbind(n).unbind(o);var b;if(p){var c;if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else{if(!a.originalEvent.changedTouches||!a.originalEvent.changedTouches.length)return!1;c=a.originalEvent.changedTouches}if(c.length>1)return!1;b=c[0],a.preventDefault()}else b=a,a.preventDefault();ve(b.pageY)}return!1}function ve(a){je=Math.max(0,Math.min(1,(a-R.offset().top)/me)),je=1-je,xe()}function we(){return!g||Zb?!1:(je>0?(ke=je,je=0):je=ke,void 0)}function xe(){S.css("height",je*me+"px"),v?"local"==Cd?Fd&&(Fd.volume=je):Ic&&Ic.setVolume(je):"undefined"!=typeof wg(X)&&wg(X).pb_setVolume(je),0==je?y.find(".player_volume").find("i").removeClass("fa-volume-up ap_vol_on ap_vol").addClass("fa-volume-off ap_mute"):je>0&&y.find(".player_volume").find("i").removeClass("fa-volume-off ap_mute_on ap_mute").addClass("fa-volume-up ap_vol"),isMobile&&ie&&(oe&&clearTimeout(oe),oe=setTimeout(qe,pe))}function Ae(){ie&&oe&&clearTimeout(oe),ye.css("display","block"),Q.bind("mousemove",Ce).bind("mouseout",Be),k.bind("mouseout",Be)}function Be(){ie&&(oe&&clearTimeout(oe),oe=setTimeout(qe,pe)),ye.css("display","none"),Q.unbind("mousemove",Ce).unbind("mouseout",Be),k.unbind("mouseout",Be)}function Ce(a){var b=a.pageY-R.offset().top;0>b?b=0:b>me&&(b=me);var c=parseInt(b-ye.height()/2+ze,10);ye.css("top",c+"px");var d=Math.max(0,Math.min(1,b/me));d=1-d;var e=parseInt(100*d,10);ye.find("p").html(e+" %")}function De(){var a,b,c,d,e,f=!1;Sd.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(h){if(!g||Zb)return!1;if(!q)return!0;var i=h.originalEvent.touches[0];a=Sd.position().left,b=Sd.position().top,c=i.pageX,d=i.pageY,e=!1,f=!0}).bind("touchmove.ap",function(g){if(f){var h=g.originalEvent.touches[0];if("horizontal"==Cb){var i=a-c+h.pageX,j=A.width();i>0?(i=0,Ge("off")):Ge("on"),j-Rd>i?(i=j-Rd,He("off")):He("on"),Sd.css("left",i+"px")}else{var i=b-d+h.pageY,k=A.height();i>0?(i=0,Ge("off")):Ge("on"),k-Rd>i?(i=k-Rd,He("off")):He("on"),Sd.css("top",i+"px")}return e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,!1}}).bind("touchend.ap",function(){f=!1}).bind("click.ap-touchclick",function(){return e?(e=!1,!1):void 0})}function Ee(){var a;"horizontal"==Cb?(a=parseInt(Sd.css("left"),10),a+=Od,a>0?(Nd&&clearInterval(Nd),a=0,Ge("off")):Ge("on"),Sd.css("left",a+"px")):(a=parseInt(Sd.css("top"),10),a+=Od,a>0?(Nd&&clearInterval(Nd),a=0,Ge("off")):Ge("on"),Sd.css("top",a+"px")),He("on")}function Fe(){var a;"horizontal"==Cb?(a=parseInt(Sd.css("left"),10),w=A.width(),a-=Od,w-Rd>a?(Nd&&clearInterval(Nd),a=w-Rd,He("off")):He("on"),Sd.css("left",a+"px")):(a=parseInt(Sd.css("top"),10),h=A.height(),a-=Od,h-Rd>a?(Nd&&clearInterval(Nd),a=h-Rd,He("off")):He("on"),Sd.css("top",a+"px")),Ge("on")}function Ge(a){"on"==a?Ld.css("display","block"):Ld.css("display","none")}function He(a){"on"==a?Md.css("display","block"):Md.css("display","none")}function Ie(){if("horizontal"==Cb){var b,a=A.width();Rd>a?(Ge("on"),He("on"),q=!0,b=parseInt(Sd.css("left"),10),a-Rd>b?(Nd&&clearInterval(Nd),b=a-Rd):b>0&&(b=0),Sd.css("left",b+"px"),Ge("off")):(Ge("off"),He("off"),q=!1)}else{var b,c=A.height();Rd>c?(Ge("on"),He("on"),q=!0,b=parseInt(Sd.css("top"),10),c-Rd>b?(Nd&&clearInterval(Nd),b=c-Rd):b>0&&(b=0),Sd.css("top",b+"px"),Ge("off")):(Ge("off"),He("off"),q=!1)}}function Je(){"scroll"==Db?"list"==C&&(Jd?"block"==F.css("display")?(Kd.reinitialise(),"vertical"==Cb?(Kd.scrollToY(0),a(".jspPane").css("top","0px")):(Kd.scrollToX(0),a(".jspPane").css("left","0px"))):ob=!0:(Jd=D,Jd.jScrollPane({verticalDragMinHeight:100,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100}),Kd=Jd.data("jsp"),Jd.bind("jsp-initialised",function(){}),"horizontal"==Cb&&(isMobile||D.bind("mousewheel",Ke)))):"buttons"==Db&&(Ld=y.find(".thumbBackward").css({cursor:"pointer",display:"none"}).bind(m,function(){return!g||Zb?!1:(Nd&&clearInterval(Nd),Nd=setInterval(function(){Ee()},5),!1)}).bind(o,function(){return Nd&&clearInterval(Nd),!1}),Md=y.find(".thumbForward").css({cursor:"pointer",display:"none"}).bind(m,function(){return!g||Zb?!1:(Nd&&clearInterval(Nd),Nd=setInterval(function(){Fe()},5),!1)}).bind(o,function(){return Nd&&clearInterval(Nd),!1}),Ie(),isMobile||D.bind("mousewheel",function(a,b){if(!g||Zb)return!1;var f,h,e=b>0?1:-1;h="vertical"==Cb?A.height():A.width();var i=h;if("horizontal"==Cb){if(i>Rd)return!1;f=parseInt(Sd.css("left"),10),f+=Od*e,f>0?f=0:i-Rd>f&&(f=i-Rd),Sd.css("left",f+"px")}else{if(i>Rd)return!1;f=parseInt(Sd.css("top"),10),f+=Od*e,f>0?f=0:i-Rd>f&&(f=i-Rd),Sd.css("top",f+"px")}return 0==f?(Ge("off"),He("on")):i-Rd>=f?(He("off"),Ge("on")):(Ge("on"),He("on"),q=!0),!1}))}function Ke(a,b){if(!g||Zb)return!1;var e=b>0?-1:1;return Kd&&Kd.scrollByX(100*e),!1}function kf(){Zb||(gf&&clearInterval(gf),_e&&clearTimeout(_e),qf(af))}function mf(){_e&&clearTimeout(_e),qf(af)}function nf(a){var f,g,b="_-",c=a.length,d="",e=0;for(e;c>e;e++)f=a.charAt(e).toLowerCase(),"\\"==f&&(f="/"),g=of(f),(g>=of("a")&&g<=of("z")||g>=of("0")&&g<=of("9")||b.indexOf(f)>=0)&&(d+=f);return d}function of(a){return a.charCodeAt(0)}function qf(b){b.stopPropagation(),Ze||(Ze=!0),Xe=b.value,"/"==Xe.charAt(0)&&(Xe=Xe.substring(1)),"/"==Xe.charAt(Xe.length-1)&&(Xe=Xe.substring(0,Xe.length-1));var c=vf(Xe);return tf(c)?(Ye=!1,void 0==df||df!=cf?(wf(),void 0):Ve?sf(Ve)?(Me.getCounter()!=ef?(Ye=!0,-1!=Me.getCounter()&&Sf(),Me.setCounter(ef,!1)):(Tf(),$f()),void 0):(alert("404 page not found, check your deeplinks second level!"),a.address.history(!1),void 0):(Zf(),void 0)):(alert("404 page not found, check your deeplinks first level!"),a.address.history(!1),!1)}function sf(a){var b=!1,c=0,d=Ne[cf].mediaName,e=d.length;for(c;e>c;c++)if(d[c]==a){ef=c,b=!0;break}return b?!0:!1}function tf(a){var b=!1,c=0;for(c;Qe>c;c++)if(Ne[c].categoryName==a){cf=c,Yb=Ne[c].id,b=!0;break}return b?!0:!1}function uf(a){var b=Ne[cf].mediaName;return Ne[cf].categoryName+"/"+b[a]}function vf(a){var b,c;return a.indexOf("/")>0?(Ue=!0,b=a.substr(0,a.indexOf("/")),We=b,Ve=a.substr(a.indexOf("/")+1)):(We=a,Ue=!1,Ve=null,b=a),c=nf(b)}function wf(){if(Zb=!0,mb.length&&mb.css("display","block"),kd&&clearInterval(kd),gc&&(_f(),bb.html("").css("display","none"),ub&&Of(),E.empty()),"wall"==C){var b=0,c=mc.length;for(b;c>b;b++)mc[b]&&mc[b].remove();mc=[],nc&&(nc=null),oc=!1}if(ac=!1,$b=!1,yd=0,Xb=-1,Wb=0,Lc=[],Vb=[],Me.reSetCounter(),Tb=[],xd=[],sd=[],td=[],vd=[],wd=[],ud=[],Gd=!1,Rd=0,"wall"!=C&&"buttons"==Db&&("horizontal"==Cb?Sd.css("left","0px"):Sd.css("top","0px"),Ld&&Ld.css("display","none"),Md&&Md.css("display","none")),0==G.find("div[id="+Yb+"]").length)return ah(Yb)?(alert("Active playlist is set to none, so no playlist have been loaded."),xf()):alert("Failed playlist selection! No playlist with id: "+Yb),Zb=!1,!1;if(0==G.find("div[id="+Yb+"]").find("div[class='playlistNonSelected']").length)return alert("Playlist is empty. Quitting."),xf(),Zb=!1,!1;if("xml"==G.find("div[id="+Yb+"]").find("div[class='playlistNonSelected']").eq(0).attr("data-type").toLowerCase()){Sb=a(G.find("div[id="+Yb+"]")).find("div[class='playlistNonSelected']").eq(0),Sc={},Re&&(Sc.deeplink=Sb.attr("data-address")),Rb=Sb;var d=Sb.attr("data-mp4Path");return zf(d),void 0}if("folder"==G.find("div[id="+Yb+"]").find("div[class='playlistNonSelected']").eq(0).attr("data-type").toLowerCase())return Qb=[],a(G.find("div[id="+Yb+"]")).find("div[class='playlistNonSelected']").each(function(){Qb.push(a(this))}),Pb=Qb.length,Bf(),void 0;var e=G.find("div[id="+Yb+"]").clone().appendTo(E);if(0==e.length)return alert("Failed playlist selection 2! No playlist with id: "+Yb),Zb=!1,!1;if(df=cf,Ub=[],Re&&(Pe=!1,Re||cf||(cf=e.index()),!Ne[cf].mediaName)){Pe=!0;var f=[];Ne[cf].mediaName=f}gc=e,Vb=e.find("div[class='playlistNonSelected']");var g=a("<div/>").addClass("playlistNonSelected").css("opacity",0).appendTo(F);rc=parseInt(g.css("marginBottom"),10),sc=parseInt(g.css("marginRight"),10),pc=g.outerWidth(!0),qc=g.outerHeight(!0),g.remove(),g=null;var h=a("<div/>").addClass("playlistThumb").css("opacity",0).appendTo(F);hd=h.width(),id=h.height(),h.remove(),h=null,Wb=Vb.length,xf()}function xf(){if(Xb++,Wb>Xb)Lc=[],yf();else{if(!nd){if(nd=!0,ab=a("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:-1e4+"px"}).bind("click",function(){return Rf(),!1}).appendTo(A).bind("mouseleave",Pf),!v)return Y.remove(),_.remove(),bb.remove(),"wall"!=C?(ab.unbind("mouseleave",Pf),"undefined"!=typeof wg(X)?(a(X).css("display","block"),md=setInterval(ug,ld)):xf()):ub&&"undefined"!=typeof wg(Z)?(a(Z).css("display","block"),md=setInterval(vg,ld)):xf(),void 0;a(X).remove(),$.remove(),"wall"!=C&&bb.css("display","block")}if(yd=xd.length,a(".playlistInfo").dotdotdot(),Me.setPlaylistItems(yd),"wall"!=C&&yd>0){"list"==C&&("vertical"==Cb?xd[yd-1].css("marginBottom","0px"):xd[yd-1].css("marginRight","0px")),Rd=0;var c,b=0;for(b;yd>b;b++)c=a(xd[b]),Rd+="horizontal"==Cb?c.outerWidth(!0):c.outerHeight(!0);"buttons"==Db?"horizontal"==Cb&&D.width(Rd):"scroll"==Db&&"horizontal"==Cb&&gc.width(Rd)}if("wall"!=C?Je():"wall"==C&&$b&&jQuery("a[data-rel^='prettyPhoto']").prettyPhoto({theme:"pp_default",deeplinking:!1,changepicturecallback:function(){isMobile||(-1!=ic?itemTriggered(ic):-1!=jc&&itemTriggered(jc),Of())},callback:function(){}}),mb.length&&mb.css("display","none"),Zb=!1,g||(g=!0,Hg(),"wall"==C&&isMobile&&k.on("click","a[data-apNumToReturn]",function(){if(void 0!=a(this).attr("data-apNumToReturn")){var b=parseInt(a(this).attr("data-apNumToReturn"),10);itemTriggered(b)}}),"wall"!=C&&(zb?(kb.bind("mouseenter",Bg).bind("mouseleave",Cg),K.bind("mouseenter",Bg),a(".playlistHolder li").bind("mouseenter",Cg)):Eg()),ub&&!Mb&&F.bind("mouseleave",Dg),videoGallerySetupDone()),"wall"!=C){if(Re){if(Ue){if(!sf(Ve))return alert("404 page not found, check your deeplinks second level!"),a.address.history(!1),void 0;Ye=!0,Me.setCounter(ef,!1)}}else{var d=f.activeItem;d>yd-1&&(d=yd-1),d>-1&&Me.setCounter(d,!1)}Fg()}}}function yf(){var b,c,d,e,f,k;if(b=a(Vb[Xb]),e=b.attr("data-type"),"local"==e){var l={};l.type="local",l.mp4Path=b.attr("data-mp4Path"),l.ogvPath=b.attr("data-ogvPath"),void 0==b.attr("data-webmPath")||ah(b.attr("data-webmPath"))||(l.webmPath=b.attr("data-webmPath")),l._item=b,f=b.find("div[class='playlistThumb']"),l.thumb=f,l.thumbImg=f.find("img[class='thumb']"),Re&&(l.deeplink=b.attr("data-address")),Lc.push(l),Gf()}else"youtube_single"==e?(d=b.attr("data-mp4Path"),c="http://gdata.youtube.com/feeds/api/videos/"+d+"?v=2&format=5&alt=jsonc",Sc={},k=b.attr("data-address"),Re&&"undefined"!=typeof k&&k!==!1&&(Sc.deeplink=k),k=b.attr("data-link"),"undefined"!=typeof k&&k!==!1&&(Sc.link=k),k=b.attr("data-hook"),"undefined"!=typeof k&&k!==!1&&(Sc.hook=k),k=b.attr("data-target"),"undefined"!=typeof k&&k!==!1&&(Sc.target=k),k=b.attr("data-description"),"undefined"!=typeof k&&k!==!1&&(Sc.description=k),b.find(".playlistTitle").length>0&&(Sc.title=b.find(".playlistTitle").html()),b.find(".thumb").length>0&&(Sc.thumb=b.find(".thumb").attr("src")),Cf(e,c)):"youtube_playlist"==e?(d=b.attr("data-mp4Path"),"PL"==b.attr("data-mp4Path").substr(0,2).toUpperCase(),Oc=d,Mc=1,c="http://gdata.youtube.com/feeds/api/playlists/"+Oc+"?start-index="+Mc+"&max-results=50&v=2&format=5&alt=jsonc",Sc={},k=b.attr("data-address"),Re&&"undefined"!=typeof k&&k!==!1&&(Sc.deeplink=k),k=b.attr("data-link"),"undefined"!=typeof k&&k!==!1&&(Sc.link=k),k=b.attr("data-hook"),"undefined"!=typeof k&&k!==!1&&(Sc.hook=k),k=b.attr("data-target"),"undefined"!=typeof k&&k!==!1&&(Sc.target=k),Rb=b,b.css("display","none"),Cf(e,c)):(alert('Wrong data-type in playlist! Playlist node data-type cannot be: "'+e+'" . Quitting.'),("xml"==e||"folder"==e)&&alert("You CANNOT mix XML or FOLDER playlist with other playlist types (local videos, youtube single videos, youtube playlists). Quitting."))}function zf(b){var c=b+"?rand="+99999999*Math.random();a.ajax({type:"GET",url:c,dataType:"html",cache:!1}).done(function(b){var c,d,e,f,g;a(b).find("div[class='playlistNonSelected']").each(function(){c=a(this),g=a("<div>").append(c.clone()).html(),g=g.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\<br\>\<br\>/g,"<br/>"),d=document.createElement("ul"),d.innerHTML=g,e=d.firstChild,f=a(e),Rb.after(f),Rb=f}),Sb&&Sb.remove(),wf()}).fail(function(a){alert("XML process error: "+a.responseText),xf()})}function Af(){var b=Qb[Pb],c=b.attr("data-mp4Path"),d=b.attr("data-address"),e=!1;"undefined"!=typeof b.attr("data-subdirs")&&b.attr("data-subdirs")!==!1&&(e=!0),Rb=b,c+="wall"==C?tb:rb,c=c.replace(/\/\//g,"/");var f=hap_source_path+"folder_parser.php",g={dir:c,sub_dirs:e};jQuery.ajax({type:"GET",url:f,data:g,dataType:"json"}).done(function(c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,u,i,v,w,s=0,t=c.length;if(0==t)return alert("Folder process failed! No media found."),void 0;for(f="list"==C?a('<div class="playlistThumb thumb"/>').appendTo(y):a('<div class="playlistThumb thumb"/>').appendTo(z),v=f.width(),w=f.height(),f.remove(),s;t>s;s++)u=c[s],j=u.path,j.indexOf("\\")&&(j=j.replace(/\\/g,"/")),k=j,l=j.substr(0,j.lastIndexOf("."))+".ogv",m=j.substr(0,j.lastIndexOf("."))+".webm",n=j.substr(0,j.lastIndexOf("."))+".jpg",o=j,p=j.substr(0,j.lastIndexOf("."))+".ogv",q=j.substr(0,j.lastIndexOf("."))+".webm",r=j.substr(0,j.lastIndexOf("."))+".jpg",o=o.replace(rb,sb),p=p.replace(rb,sb),q=q.replace(rb,sb),r=r.replace(rb,sb),e=a("<div/>").addClass("playlistNonSelected").attr({"data-id":yd-1,"data-type":"local","data-mp4Path":k,"data-ogvPath":l,"data-webmPath":m,"data-imagePath":n}),h=k.substr(0,k.lastIndexOf(".")),i=h.indexOf("/")?h.substr(h.lastIndexOf("/")+1):h,i=i.split("_").join(" "),g=a('<div class="playlistThumb"><img class="thumb" src="'+r+'" alt="'+i+'"/></div>').appendTo(e),f=a('<div class="playlistInfo"><p><span class="playlistTitle">'+i+"</span></p></div>").appendTo(e),Rb.after(e),Rb=e,Re&&e.attr("data-address",d+(s+1).toString());b.remove(),Bf()}).fail(function(a){alert("Folder process error: "+a.responseText),alert("Make sure you are running this online or on local server, not offline!"),xf()})}function Bf(){Pb--,Pb>-1?Af():wf()}function Cf(a,b){jQuery.ajax({url:b,dataType:"jsonp",success:function(b){"youtube_single"==a?Ef(b):Df(b)},error:function(a){Ff(a)}})}function Df(a){if(a.error)return alert(a.error.message),xf(),void 0;if(a.data.items){var d,e,f,b=a.data.items.length,c=0;for(c;b>c;c++)d=a.data.items[c].video,d&&d.accessControl&&(obj={},obj.type="youtube_playlist",Re&&(obj.deeplink=Sc.deeplink+(c+1).toString()),obj.id=d.id,obj.title=Sc.title?Sc.title:d.title?d.title:"",obj.description=Sc.description?Sc.description:d.description?d.description:"",obj.thumbnail=!Sc.thumb&&d.thumbnail?d.thumbnail.sqDefault?d.thumbnail.sqDefault:d.thumbnail.hqDefault:Sc.thumb?Sc.thumb:"",Lc.push(obj));Mc+=Nc,e="youtube_playlist",f="http://gdata.youtube.com/feeds/api/playlists/"+Oc+"?start-index="+Mc+"&max-results=50&v=2&format=5&alt=jsonc",Cf(e,f)}else Gf()}function Ef(a){var c,b={};return(c=a.data)?(c.accessControl?(b.type="youtube_single",Re&&(b.deeplink=Sc.deeplink),b.id=c.id,b.title=Sc.title?Sc.title:c.title?c.title:"",b.description=Sc.description?Sc.description:c.description?c.description:"",b.thumbnail=!Sc.thumb&&c.thumbnail?c.thumbnail.sqDefault?c.thumbnail.sqDefault:c.thumbnail.hqDefault:Sc.thumb?Sc.thumb:"",Lc.push(b),Gf()):xf(),void 0):(xf(),void 0)}function Ff(){xf()}function Gf(){var e,f,g,h,i,j,k,m,n,o,p,q,r,w,b=Lc.length,c=0;if(Pe){Te=l+Se+We+"/";var y,z=Ne[cf].mediaName}for(c;b>c;c++){f=Lc[c],g=f.type,yd+=1;var B=yd-1;if("local"==g){if(xd.push(f._item),void 0==f._item.attr("data-orig-type")||ah(f._item.attr("data-orig-type"))||(Hb||f.thumb&&f.thumb.remove(),Ib||(f._item.find(".playlistInfo").length&&f._item.find(".playlistInfo").remove(),f._item.attr("data-description","")),f._item.attr("data-type",f._item.attr("data-orig-type"))),void 0==f._item.attr("data-description")||ah(f._item.attr("data-description"))||(Tb[yd-1]=f._item.attr("data-description")),f.thumb&&(i=f.thumb,sd.push(i),j=f.thumbImg,td.push(j),j.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})),n=a("<div/>").css({position:"absolute",width:pc+"px",height:qc+"px",top:"0px",left:"0px",background:"#ad4",cursor:"pointer",opacity:0}).attr("dataTitle","hitdiv"),"wall"!=C)n.appendTo(f._item),ud[yd-1]=n,f._item.bind("click",Qf).attr("data-id",yd-1);else{var D;void 0!=f._item.attr("data-link")&&(D=f._item.attr("data-link"));var E;void 0!=f._item.attr("data-hook")&&(E=f._item.attr("data-hook"));var F="";void 0!=f._item.attr("data-description")&&(F=f._item.attr("data-description"));var G="";if(f._item.find("span[class='playlistTitle']").length&&(G=f._item.find("span[class='playlistTitle']").html()),void 0!=E&&void 0!=D)if($b=!0,v)r=a('<a href="'+D+'" data-rel="'+E+'" title="'+F+'" />').appendTo(f._item),w=a('<img src="" alt="'+G+'"/>').css("display","none").appendTo(r),n.appendTo(r),isMobile&&n.bind("click",function(){itemTriggered(a(this).attr("data-id"))}).attr("data-id",yd-1);else{var H=a("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:-1e4+"px"});r=a('<a href="'+D+'" data-rel="'+E+'" title="'+F+'"/>').data("yt_blocker",H).appendTo(A),w=a('<img src="" alt="'+G+'"/>').css("display","none").appendTo(r),mc[yd-1]=r,H.appendTo(r),isMobile||H.bind("mouseleave",Pf).attr("data-id",yd-1),ud[yd-1]=H}else if(void 0!=D){var I="_blank";if(void 0==f._item.attr("data-target")||ah(f._item.attr("data-target"))||(I=f._item.attr("data-target")),v)r=a('<a href="'+D+'" target="'+I+'" data-apNumToReturn="'+B+'"/>').appendTo(f._item),n.appendTo(r),isMobile||n.bind("click",function(){-1!=ic?itemTriggered(ic):-1!=jc&&itemTriggered(jc)}).attr("data-id",yd-1);else{var H=a("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:-1e4+"px"});r=a('<a href="'+D+'" target="'+I+'"/>').data("yt_blocker",H).appendTo(A),mc[yd-1]=r,H.appendTo(r),isMobile||H.bind("mouseleave",Pf).attr("data-id",yd-1),ud[yd-1]=H,isMobile||H.bind("click",function(){-1!=ic?itemTriggered(ic):-1!=jc&&itemTriggered(jc)}).attr("data-id",yd-1)}}else n.appendTo(f._item),ud[yd-1]=n,f._item.bind("click",Qf).data("no_action","true").attr("data-id",yd-1)}isMobile||(v?f._item.bind("mouseenter",Jf).bind("mouseleave",Pf).attr("data-id",yd-1):f._item.bind("mouseenter",Jf).attr("data-id",yd-1)),ub&&(m=a("<div/>").addClass("thumb_vid").attr({dataTitle:"videoDiv"}).appendTo(a(sd[yd-1])),wd[yd-1]=m,k=a(new Image).attr("data-id",yd-1).addClass("thumbPreloader").load(function(){}).error(function(){}).attr({src:x,dataTitle:"thumbPreloader"}).appendTo(sd[yd-1]),vd[yd-1]=k)}else if("youtube_single"==g||"youtube_playlist"==g){if("youtube_single"==g?e=a(Vb[Xb]):"youtube_playlist"==g&&(e=a("<li/>").addClass("playlistNonSelected").attr({"data-id":yd-1,"data-type":f.type,"data-mp4Path":f.id}),Rb.after(e),Rb=e,Re&&e.attr("data-address",f.deeplink)),xd.push(e),Hb?(e.find(".playlistThumb").length>0&&e.find(".playlistThumb").remove(),h=a("<div/>").addClass("playlistThumb").appendTo(e),i=h,sd.push(i),f.thumbnail?(j=a(new Image).css("opacity",0).attr("data-id",yd-1).load(function(){a(this).addClass("thumb_yt").stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}).error(function(){}).attr({src:f.thumbnail}).appendTo(i),td.push(j)):td.push("")):(i=e.find("div[class='playlistThumb']"),i&&(sd.push(i),j=i.find("img[class='thumb']"),j&&(j.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),td.push(j)))),"wall"!=C)if(Ib){var J=f.title?f.title:"",K=f.description?f.description:"";"list"==C&&(q=a('<p><span class="playlistTitle">'+J+'</span><br><span class="playlistContent">'+K+"</span></p>")),0==e.find(".playlistTitle").length?h=a("<div/>").html(q).addClass("playlistInfo").appendTo(e):"list"==C?(e.find(".playlistTitle").html(J),e.find(".playlistContent").html(K)):e.find(".playlistTitle").html(J),e.attr("data-description",K),Tb[yd-1]=K}else void 0==e.attr("data-description")||ah(e.attr("data-description"))||(Tb[yd-1]=e.attr("data-description"));if(n=a("<div/>").css({position:"absolute",width:pc+"px",height:qc+"px",top:"0px",left:"0px",background:"#ad4",cursor:"pointer",opacity:0}).attr("dataTitle","hitdiv"),"wall"!=C)n.appendTo(e),ud[yd-1]=n,e.bind("click",Qf).attr("data-id",yd-1);else{var D=Sc.link?Sc.link:void 0,E=Sc.hook?Sc.hook:void 0;"youtube_playlist"==g&&void 0!=E&&(D="id");var F=f.description?f.description:"";F.length>70&&(F=F.substring(0,70)+"...");var G=f.title?f.title:"";G.length>30&&(G=G.substring(0,30)+"...");var L=A,M=-1e4;if(void 0!=E&&void 0!=D){ub||(L=e,M=0),$b=!0,"youtube_playlist"==g&&(D="http://www.youtube.com/watch?v="+f.id);var H=a("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:M+"px"});r=a('<a href="'+D+'" data-rel="'+E+'" title="'+F+'"/>').data("yt_blocker",H).appendTo(L),w=a('<img src="" alt="'+G+'"/>').css("display","none").appendTo(r),mc[yd-1]=r,H.appendTo(r),isMobile?H.bind("click",function(){itemTriggered(a(this).attr("data-id"))}).attr("data-id",yd-1):H.bind("mouseleave",Pf).attr("data-id",yd-1),ud[yd-1]=H}else if(void 0!=D){ub||(L=e,M=0);var I="_blank";Sc.target&&(I=Sc.target);var H=a("<div/>").addClass("yt_overlay_blocker").css({cursor:"pointer",opacity:0,left:M+"px"});r=a('<a href="'+D+'" target="'+I+'" data-apNumToReturn="'+B+'"/>').data("yt_blocker",H).appendTo(L),mc[yd-1]=r,H.appendTo(r),isMobile||H.bind("mouseleave",Pf).attr("data-id",yd-1),ud[yd-1]=H,isMobile||H.bind("click",function(){-1!=ic?itemTriggered(ic):-1!=jc&&itemTriggered(jc)}).attr("data-id",yd-1)}else n.appendTo(e),ud[yd-1]=n,e.bind("click",Qf).data("no_action","true").attr("data-id",yd-1)}isMobile||e.bind("mouseenter",Jf).bind("mouseleave",Pf).attr("data-id",yd-1),ub&&(m=a("<div/>").addClass("thumb_vid").attr({dataTitle:"videoDiv"}).appendTo(a(sd[yd-1])),wd[yd-1]=m,k=a(new Image).attr("data-id",yd-1).addClass("thumbPreloader").load(function(){}).error(function(){}).attr({src:x,dataTitle:"thumbPreloader"}).appendTo(sd[yd-1]),vd[yd-1]=k)}Re&&Pe&&(y=nf(f.deeplink),z.push(y)),"local"==f.type?(s?o=f.mp4Path:t?o=f.ogvPath:u&&f.webmPath&&(o=f.webmPath),p=o.lastIndexOf("/")?o.substr(o.lastIndexOf("/")+1):o,Ub.push({id:yd,name:p,type:f.type,"video-id":o,deeplink:Re?Te+f.deeplink:"undefined"})):(e.attr("data-title",f.title?f.title:""),Ub.push({id:yd,name:f.title?f.title:"",type:f.type,"video-id":f.id,deeplink:Re?Te+f.deeplink:"undefined"}))}xf()}function Hf(a){return!g||Zb?!1:(void 0===a&&("block"==F.css("display")?a="off":"on"),"list"==C&&("off"==a?kc=!1:(F.css("display","block"),kc=!0,ob&&(Je(),ob=!1))),void 0)}function If(){if(vc){var a=parseInt(vc.css("borderLeftWidth"),10),b=parseInt(vc.css("marginLeft"),10),c=parseInt(vc.css("paddingLeft"),10),d=parseInt(A.css("borderLeftWidth"),10),e=parseInt(A.css("marginLeft"),10),f=parseInt(A.css("paddingLeft"),10),g=parseInt(vc.css("borderTopWidth"),10),h=parseInt(vc.css("marginTop"),10),i=parseInt(vc.css("paddingTop"),10),j=parseInt(A.css("borderTopWidth"),10),k=parseInt(A.css("marginTop"),10),l=parseInt(A.css("paddingTop"),10);if(!vc.offset())return!1;var m=parseInt(vc.offset().left,10)-parseInt(A.offset().left,10)+a+b+c+d+e+f,n=parseInt(vc.offset().top,10)-parseInt(A.offset().top,10)+g+h+i+j+k+l;"local"==hc?(_b&&ab&&ab.css({left:m+"px",top:n+"px"}),nc&&nc.css({left:m+"px",top:n+"px"}),$.css({left:m+"px",top:n+"px"})):("youtube_single"==hc||"youtube_playlist"==hc)&&(v?"wall"==C?(_b&&ab&&ab.css({left:m+"px",top:n+"px"}),nc&&nc.css({left:m+"px",top:n+"px"}),oc&&_.css({left:m+"px",top:n+"px"})):(ab&&ab.css({left:m+"px",top:n+"px"}),_.css({left:m+"px",top:n+"px"})):(_b&&ab&&ab.css({left:m+"px",top:n+"px"}),nc&&nc.css({left:m+"px",top:n+"px"}),$.css({left:m+"px",top:n+"px"})))}}function Jf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("data-orig-type");if(ub&&"undefined"!=typeof d&&d!==!1&&"youtube_single"==c.attr("data-orig-type")&&!Hb)return!1;var e=parseInt(c.attr("data-id"),10);if(e==Me.getCounter()||e==ic)return!1;if(ic=e,jc=e,"wall"==C&&(_b=!1,c.data("no_action")&&(_b=!0)),hc=c.attr("data-type"),"wall"!=C&&c.removeClass("playlistNonSelected").addClass("playlistSelected"),ub){uc=e,vc=a(sd[e]),tc=a(ud[e]),wc=a(td[e]).stop().animate({opacity:0},{duration:500,easing:"easeOutSine"}),xc=a(vd[e]).css("display","block"),yc=a(wd[e]);var f=!1;if(s)ed=a(xd[e]).attr("data-mp4Path").replace(rb,sb);else if(!Jb&&t&&void 0!=a(xd[e]).attr("data-ogvPath"))ed=a(xd[e]).attr("data-ogvPath").replace(rb,sb),f=!0;else{if(!Jb||!u||void 0==a(xd[e]).attr("data-webmPath"))return alert("No supported video format found for preview video. Quitting."),!1;ed=a(xd[e]).attr("data-webmPath").replace(rb,sb)}if(v)if("local"==hc){var h="";if(h+='<video class="preview_video_cont" width="'+hd+'" height="'+id+'" preload="auto" >',h+='<source src="'+ed+'" />',h+="</video>",!isAndroid){var i;i=s?'type="video/mp4"':f?'type="video/ogg"':'type="video/webm"';var j=h.match(/\/\>/);h=h.slice(0,j.index)+i+h.slice(j.index)}yc.html(h),ec=yc.find(".preview_video_cont"),fc=ec[0],ec.bind("ended",Kf).bind("canplaythrough",Lf).bind("canplay",Mf)}else fd=a(xd[e]).attr("data-mp4Path"),isIE&&_.css({left:-1e4+"px",width:"600px",height:"400px"}),"wall"==C&&(nc&&nc.css("left",-1e4+"px"),mc[e]&&(nc=mc[e].data("yt_blocker")),kd&&clearInterval(kd),kd=setInterval(If,jd)),cg();else"wall"==C&&(nc&&nc.css("left",-1e4+"px"),mc[e]&&(nc=mc[e].data("yt_blocker")),kd&&clearInterval(kd),kd=setInterval(If,jd)),ed=a(xd[e]).attr("data-mp4Path"),ed=ed.replace(rb,sb),"local"==hc?"undefined"!=typeof wg(Z)&&wg(Z).pb_play(ed,2,hd,id,"local"):"undefined"!=typeof wg(Z)&&wg(Z).pb_play(ed,2,hd,id,"youtube")}return!1}function Kf(){try{fc.currentTime=0}catch(a){}fc.play()}function Lf(){Nf()}function Mf(){Nf()}function Nf(){ec&&ec.unbind("canplaythrough",Lf).unbind("canplay",Mf),xc&&xc.css("display","none"),fc&&fc.play()}function Of(){if(kd&&clearInterval(kd),v?"local"==hc?(ec&&ec.unbind("ended",Kf).unbind("canplaythrough",Lf).unbind("canplay",Mf).find("source").attr("src",""),yc&&yc.html("")):(_&&_.css("left",-1e4+"px"),isIE?Jc&&Jc.clean():Jc&&Jc.stop(),nc&&nc.css("left",-1e4+"px"),ab&&ab.css("left",-1e4+"px"),oc=!1):("undefined"!=typeof wg(Z)&&wg(Z).pb_dispose&&wg(Z).pb_dispose(),$.css("left",-1e4+"px"),nc&&nc.css("left",-1e4+"px"),ab&&ab.css("left",-1e4+"px"),oc=!1),xc&&xc.css("display","none"),wc&&wc.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),isIE&&ieBelow9&&"wall"!=C){var d,b=Me.getCounter(),c=0;for(c;yd>c;c++)c!=b&&(d=a(xd[c]),d&&d.removeClass("playlistSelected").addClass("playlistNonSelected"))}ic=-1}function Pf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("data-id");if(d==Me.getCounter())return!1;if(ub)if("local"==hc)if(v)Of();else if("wall"!=C)if(tc){var e=parseInt(tc.offset().left,10)-parseInt(A.offset().left,10),f=parseInt(tc.offset().top,10)-parseInt(A.offset().top,10),h=b.pageX-parseInt(A.offset().left,10),i=b.pageY-parseInt(A.offset().top,10);if(h>e&&e+pc-sc>h&&i>f&&f+qc-rc>i)return!1;Of()}else Of();else if(_b)Of();else if(tc){var e=parseInt(tc.offset().left,10)-parseInt(A.offset().left,10),f=parseInt(tc.offset().top,10)-parseInt(A.offset().top,10),h=b.pageX-parseInt(A.offset().left,10),i=b.pageY-parseInt(A.offset().top,10);if(h>e&&e+pc-sc>h&&i>f&&f+qc-rc>i)return!1;Of()}else Of();else if("youtube_single"==hc||"youtube_playlist"==hc)if(tc&&tc.offset()){var e=parseInt(tc.offset().left,10)-parseInt(A.offset().left,10),f=parseInt(tc.offset().top,10)-parseInt(A.offset().top,10),h=b.pageX-parseInt(A.offset().left,10),i=b.pageY-parseInt(A.offset().top,10);if(h>e&&e+pc-sc>h&&i>f&&f+qc-rc>i){if("wall"==C)return!1;if(!(b.pageX<=parseInt(A.offset().left,10)||b.pageY<=parseInt(A.offset().top,10)||b.pageX>=parseInt(A.offset().left,10)+F.width()||b.pageY>=parseInt(A.offset().top,10)+F.height()))return!1;Of()}else Of()}else Of();return"wall"!=C&&c.removeClass("playlistSelected").addClass("playlistNonSelected"),ic=-1,!1}function Qf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("data-id");if(ic=d,"wall"!=C){if(d==Me.getCounter())return!1;ub&&Of(),Sf(),Me.processPlaylistRequest(d)}return itemTriggered(d),!1}function Rf(){if(!g||Zb)return!1;var a=uc;if("wall"!=C){if(a==Me.getCounter())return!1;ub&&Of(),Sf(),Me.processPlaylistRequest(a)}itemTriggered(a)}function Sf(){if("wall"==C)return!1;if(-1!=Me.getCounter()){var b=Me.getCounter(),c=a(xd[b]);if(c&&c.removeClass("playlistSelected").addClass("playlistNonSelected"),"list"==C){var d=ud[b];d&&d.css("cursor","pointer")}}}function Tf(){if("wall"==C)return!1;var b=Me.getCounter(),c=a(xd[b]);if(c&&c.removeClass("playlistNonSelected").addClass("playlistSelected"),"list"==C){var d=ud[b];d&&d.css("cursor","default")}}function Uf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("class"); return"player_toggleControl"==d?kg():"player_volume"==d?isMobile?ie?re():(we(),xe()):(we(),xe()):"playlist_toggle"==d?"list"==C&&(Hf(),lc=kc):"info_toggle"==d?zg():"ap_share_btn"==d?gb.toggle():"player_fullscreen"==d?$g(!0):"player_prev"==d?Yf():"player_next"==d?Xf():"caption_btn"==d&&ng(),!1}function Vf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("class"),e=c.find("i");return"player_toggleControl"==d?gd?e.removeClass("ap_pause").addClass("ap_pause_on"):e.removeClass("ap_play").addClass("ap_play_on"):"player_volume"==d?0==je?e.removeClass("ap_mute").addClass("ap_mute_on"):e.removeClass("ap_vol").addClass("ap_vol_on"):"playlist_toggle"==d?e.removeClass("ap_pl_tog").addClass("ap_pl_tog_on"):"info_toggle"==d?e.removeClass("ap_pl_info").addClass("ap_pl_info_on"):"ap_share_btn"==d?e.removeClass("ap_pl_share").addClass("ap_pl_share_on"):"player_fullscreen"==d?"normal"==Dd?e.removeClass("ap_fs_ent").addClass("ap_fs_ent_on"):e.removeClass("ap_fs_exit").addClass("ap_fs_exit_on"):"caption_btn"==d&&e.removeClass("ap_cc").addClass("ap_cc_on"),!1}function Wf(b){if(!g||Zb)return!1;if(!b)var b=window.event;b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation();var c=a(b.currentTarget),d=c.attr("class"),e=c.find("i");return"player_toggleControl"==d?gd?e.removeClass("ap_pause_on").addClass("ap_pause"):e.removeClass("ap_play_on").addClass("ap_play"):"player_volume"==d?0==je?e.removeClass("ap_mute_on").addClass("ap_mute"):e.removeClass("ap_vol_on").addClass("ap_vol"):"playlist_toggle"==d?e.removeClass("ap_pl_tog_on").addClass("ap_pl_tog"):"info_toggle"==d?e.removeClass("ap_pl_info_on").addClass("ap_pl_info"):"ap_share_btn"==d?e.removeClass("ap_pl_share_on").addClass("ap_pl_share"):"player_fullscreen"==d?"normal"==Dd?e.removeClass("ap_fs_ent_on").addClass("ap_fs_ent"):e.removeClass("ap_fs_exit_on").addClass("ap_fs_exit"):"caption_btn"==d&&(e.removeClass("ap_cc_on").addClass("ap_cc"),!isMobile&&_c&&($c&&clearTimeout($c),$c=setTimeout(pg,Zc))),!1}function Xf(){g&&(Sf(),Me.advanceHandler(1,!0))}function Yf(){g&&(Sf(),Me.advanceHandler(-1,!0))}function Zf(){g&&Cd&&(Cd&&_f(),Sf(),Me.reSetCounter())}function $f(){Cd&&_f();var b=a(xd[Me.getCounter()]);Cd=b.attr("data-type"),fd=b.attr("data-mp4Path"),dd=b.attr("data-mp4Path"),Uc&&b.find("div[class=track_list]").length&&(Vc=!0),"local"==Cd?vb?v?eg():"undefined"!=typeof wg(X)&&(wg(X).pb_play(dd,Kb,z.width(),z.height(),"local",!0),bd=!0):(dg(),Eg()):("youtube_single"==Cd||"youtube_playlist"==Cd)&&(v?bg():"undefined"!=typeof wg(X)&&(wg(X).pb_play(fd,Kb,z.width(),z.height(),"youtube",wb),vb&&(bd=!0))),"wall"==C||isMobile||itemTriggered(Me.getCounter())}function _f(){if(rd&&clearInterval(rd),Gg(),yg(),Cd&&"local"==Cd)if(v){if(Fd){Fd.pause();try{Fd.currentTime=0}catch(a){}Fd.src=""}Ed&&Ed.unbind("ended",mg).unbind("loadedmetadata",jg).unbind("waiting",fg).unbind("playing",gg).unbind("play",hg).unbind("pause",ig),bb.css("display","none"),!isMobile&v?(bb.html(""),ac=!1):Uc&&Ed&&Ed.removeAttr("id").removeClass("captioned")}else"undefined"!=typeof wg(X)&&wg(X).pb_dispose&&wg(X).pb_dispose();else(Cd&&"youtube_single"==Cd||Cd&&"youtube_playlist"==Cd)&&(v?(Ic&&Ic.stop(),Y.css("left",-1e4+"px")):"undefined"!=typeof wg(X)&&wg(X).pb_dispose&&wg(X).pb_dispose());kb.length&&ag("off"),Tc&&(Tc.remove(),Tc=null),cb.css("display","none"),bh(),gd=!1,bd=!1,Uc&&(captionator.destroy(),ad&&ad.remove(),U.css("display","none")),Og(),Vc=!1,Ad=Bd=null}function ag(a){kb.css("left","0px"),"off"==a?(kb.css("opacity",0),isIE&&ieBelow9&&kb.css("display","none")):(kb.css("opacity",1),kb.css("display","block"))}function bg(){if(Pc)Rg(),Ic.initVideo(fd);else{var b={autoPlay:wb,defaultVolume:je,mediaPath:fd,youtubeHolder:Y,youtubeChromeless:Rc,isMobile:isMobile,initialAutoplay:xb,quality:Nb};Ic=a.youtubePlayer(b),a(Ic).bind("ap_YoutubePlayer.YT_READY",function(){Rg(),kb.css("left",-1e4+"px")}),a(Ic).bind("ap_YoutubePlayer.START_PLAY",function(){bd=!0,Rg(),xg(),Eg(),rd&&clearInterval(rd),rd=setInterval(lg,qd),ag("on")}),a(Ic).bind("ap_YoutubePlayer.END_PLAY",function(){mg()}),a(Ic).bind("ap_YoutubePlayer.STATE_PLAYING",function(){hg()}),a(Ic).bind("ap_YoutubePlayer.STATE_PAUSED",function(){ig()}),a(Ic).bind("ap_YoutubePlayer.STATE_CUED",function(){mb.length&&mb.css("display","none")}),Pc=!0}mb.length&&setTimeout(function(){mb.css("display","none")},1e3),Eg()}function cg(){if(isIE){Jc&&(a(Jc).unbind("ap_YoutubePlayer.YT_READY").unbind("ap_YoutubePlayer.START_PLAY").unbind("ap_YoutubePlayer.END_PLAY"),Jc=null);var b={autoPlay:!0,defaultVolume:0,mediaPath:fd,youtubeHolder:_,youtubeChromeless:!0,isMobile:isMobile,initialAutoplay:xb,quality:"small",small_embed:!0,isIE:isIE};Jc=a.youtubePlayer(b),a(Jc).bind("ap_YoutubePlayer.YT_READY",function(){}),a(Jc).bind("ap_YoutubePlayer.START_PLAY",function(){return xc&&xc.css("display","none"),-1==ic?(Jc.stopPreview(),Of(),void 0):(_.css({width:hd+"px",height:id+"px",left:"0px"}),"wall"!=C?(kd&&clearInterval(kd),kd=setInterval(If,jd)):oc=!0,setTimeout(function(){_.css("opacity",1)},100),void 0)}),a(Jc).bind("ap_YoutubePlayer.END_PLAY",function(){return-1==ic?(Jc.stopPreview(),Of(),void 0):(Jc.play(),void 0)}),Qc=!0}else if(Qc)Jc.initVideo(fd);else{var b={autoPlay:!0,defaultVolume:0,mediaPath:fd,youtubeHolder:_,youtubeChromeless:!0,isMobile:isMobile,initialAutoplay:xb,quality:"small",small_embed:!0,isIE:isIE};Jc=a.youtubePlayer(b),a(Jc).bind("ap_YoutubePlayer.YT_READY",function(){}),a(Jc).bind("ap_YoutubePlayer.START_PLAY",function(){return xc&&xc.css("display","none"),-1==ic?(Jc.stopPreview(),Of(),void 0):("wall"!=C?(kd&&clearInterval(kd),kd=setInterval(If,jd)):oc=!0,setTimeout(function(){_.css("opacity",1)},100),void 0)}),a(Jc).bind("ap_YoutubePlayer.END_PLAY",function(){return-1==ic?(Jc.stopPreview(),Of(),void 0):(Jc.play(),void 0)}),Qc=!0}}function dg(){cb.css("display","block"),mb.length&&mb.css("display","block");var b=a(xd[Me.getCounter()]),c=b.attr("data-imagePath"),d=c+"?rand="+99999999*Math.random();Tc=a(new Image).css({position:"absolute",display:"block",opacity:0}).appendTo(cb).load(function(){mb.length&&mb.css("display","none"),pb=this.width,qb=this.height,Ad=this.width,Bd=this.height,Qg(Tc),Tc.animate({opacity:1},{duration:500,easing:"easeOutSine"}),kb.length&&ag("on")}).error(function(){}).attr("src",d)}function eg(){var b=a(xd[Me.getCounter()]),c=!1;if(s)cd=b.attr("data-mp4Path");else if(!Jb&&t&&void 0!=b.attr("data-ogvPath"))cd=b.attr("data-ogvPath"),c=!0;else{if(!Jb||!u||void 0==b.attr("data-webmPath"))return alert("No supported video format found. Quitting."),!1;cd=b.attr("data-webmPath")}if(ac)bb.css("display","block"),Vc&&Ed.append(a.parseHTML(qg(b))),Fd.src=cd,Fd.load();else{var d="";if(d+='<video class="video_cont" width="'+Ad+'" height="'+Bd+'">',d+='<source src="'+cd+'" />',d+="</video>",!isAndroid){var e;e=s?'type="video/mp4"':c?'type="video/ogg"':'type="video/webm"';var f=d.match(/\/\>/);d=d.slice(0,f.index)+e+d.slice(f.index)}if(Vc){var f=d.match(/\<\/video\>/);d=d.slice(0,f.index)+qg(b)+d.slice(f.index)}bb.css("display","block").html(d),Ed=bb.find(".video_cont"),Fd=Ed[0]}if(Fd.volume=je,Ed.css("position","absolute").bind("ended",mg).bind("loadedmetadata",jg).bind("waiting",fg).bind("playing",gg).bind("play",hg).bind("pause",ig),isIOS&&!ac?(Fd.src=cd,Fd.load()):isAndroid&&!ac&&(Fd.play(),kb.length&&ag("off"),Tc&&Tc.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Tc.remove(),Tc=null}}),bd=!0,Eg()),ac=!0,Uc&&Vc){cb.css("display","block");var g=0!=Ug("h")?Ug("h"):Wg();captionator.captionify(".video_cont",null,{controlHeight:Ab+"px",appendCueCanvasTo:".mediaPreview"},g),captionator.setRedraw(!0)}}function fg(){mb.length&&mb.css("display","block")}function gg(){mb.length&&mb.css("display","none")}function hg(){L.find("i").removeClass("fa-play ap_play ap_play_on").addClass("fa-pause ap_pause"),kb.length&&ag("off"),gd=!0}function ig(){L.find("i").removeClass("fa-pause ap_pause ap_pause_on").addClass("fa-play ap_play"),kb.length&&ag("on"),gd=!1}function jg(){Fd.videoWidth&&(Ad=Fd.videoWidth),Fd.videoHeight&&(Bd=Fd.videoHeight),Rg(),rd&&clearInterval(rd),rd=setInterval(lg,qd),Fd.play(),bd=!0,xg(),vb=!1,Eg(),Vc&&(bb.find("track").remove(),Fd.textTracksNew,U.css("display","block"),Og())}function kg(){return-1==Me.getCounter()?!1:("local"==Cd?bd||vb?v?Fd.paused?Fd.play():Fd.pause():"undefined"!=typeof wg(X)&&wg(X).pb_togglePlayback():(Tc&&Tc.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Tc.remove(),Tc=null}}),v?eg():"undefined"!=typeof wg(X)&&wg(X).pb_play(dd,Kb,z.width(),z.height(),"local",!0)):("youtube_single"==Cd||"youtube_playlist"==Cd)&&(v?Ic&&Ic.togglePlayback():("undefined"!=typeof wg(X)&&wg(X).pb_togglePlayback(),bd=!0)),bd=!0,!1)}function lg(){if("local"==Cd){if(v&&(I.find("p").html(fh(Fd.currentTime)),J.find("p").html(gh(Fd.duration)),!Xd)){P.width(Fd.currentTime/Fd.duration*$d);try{var a=Math.floor(Fd.buffered.end(0))}catch(b){}if(!isNaN(a)){var c=a/Math.floor(Fd.duration);isNaN(c)||O.width(c*$d)}}}else("youtube_single"==Cd||"youtube_playlist"==Cd)&&v&&(I.find("p").html(fh(Ic.getCurrentTime())),J.find("p").html(gh(Ic.getDuration())),Ic&&!Xd&&(P.width(Ic.getCurrentTime()/Ic.getDuration()*$d),c=Ic.getVideoBytesLoaded()/Ic.getVideoBytesTotal(),O.width(c*$d)))}function mg(){if(yb)Xf();else if("local"==Cd){try{Fd.currentTime=0}catch(a){}Fd.paused&&Fd.play(),vb||Fd.pause()}else("youtube_single"==Cd||"youtube_playlist"==Cd)&&(vb?Ic.play():kb.length&&ag("off"))}function ng(){$c&&clearTimeout($c),_c?V.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){V.css("display","none")}}):V.css({display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine",complete:function(){}}),_c=!_c}function pg(){$c&&clearTimeout($c),V.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){V.css("display","none")}}),_c=!1}function qg(b){var d,f,g,h,c="",e=a("<div>"),i=!1;return ad=a("<ul class='captions_menu'></ul>").appendTo(V),b.find("div[class=track_list]").children().each(function(){h=a(this),f=a("<li/>").appendTo(ad),g=a('<a href="#"/>').text(h.attr("data-label")).addClass("captionOut").attr("data-srclang",h.attr("data-srclang")).bind("click",rg).appendTo(f),isMobile||g.bind("mouseover",sg).bind("mouseout",tg),h.attr("data-default")&&(i=!0,Yc=g.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor","default")),d=e.empty().append(h.clone()).html(),d=d.replace(/\<div/g,"<track").replace(/\<\/div\>/g,"</track>").replace(/data\-/g,""),c+=d}),f=a("<li/>").appendTo(ad),g=a('<a href="#"/>').text("None").addClass("captionOut").attr("data-srclang","none").bind("click",rg).appendTo(f),i||(Yc=g.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor","default")),isMobile||g.bind("mouseover",sg).bind("mouseout",tg),V.css("top",-V.height()-5+"px"),c}function rg(){var b=a(this);if(1==b.data("active"))return!1;Yc&&Yc.removeClass("captionOver").addClass("captionOut").data("active",!1).css("cursor","pointer"),Yc=b.removeClass("captionOut").addClass("captionOver").data("active",!0).css("cursor","default");var c=Fd.textTracksNew,d=b.attr("data-srclang"),e=0,f=c.length;if("none"==d)for(e;f>e;e++)c[e].mode=0;else for(e;f>e;e++)c[e].mode=c[e].language==d?2:0;return isMobile&&($c&&clearTimeout($c),$c=setTimeout(pg,Zc)),!1}function sg(){$c&&clearTimeout($c);var b=a(this);return b.removeClass("captionOut").addClass("captionOver"),!1}function tg(){$c&&clearTimeout($c),$c=setTimeout(pg,Zc);var b=a(this);return 1!=b.data("active")&&b.removeClass("captionOver").addClass("captionOut"),!1}function ug(){void 0!=wg(X).setData&&(md&&clearInterval(md),wg(X).setData(f),ub&&"undefined"!=typeof wg(Z)?(a(Z).css("display","block"),md=setInterval(vg,ld)):xf())}function vg(){void 0!=wg(Z).setData&&(md&&clearInterval(md),wg(Z).setData(f),$.css({left:-1e4+"px",width:hd+"px",height:id+"px"}),xf())}function wg(a){return"#"==a.charAt(0)&&(a=a.substr(1)),-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function xg(){if(0!=y.find(".infoHolder").length){var a=Me.getCounter();if(void 0!=Tb[a]&&!ah(Tb[a])){var b=Tb[a];lb.html(b),hb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),Bb&&zg()}}}function yg(){0!=y.find(".infoHolder").length&&(ib.css("display","none"),hb.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){hb.css("display","none")}}),Gd=!1)}function zg(){0!=y.find(".infoHolder").length&&(Gd?(ib.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){ib.css("display","none")}}),Gd=!1):(ib.css({opacity:0,display:"block"}),Id?(Id.reinitialise(),Id.scrollToY(0)):(Id=ib.jScrollPane().data().jsp,ib.bind("jsp-initialised",function(){}),ib.jScrollPane({verticalDragMinHeight:100,verticalDragMaxHeight:100})),ib.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),Gd=!0))}function Ag(){Id&&(Id.reinitialise(),Id.scrollToY(0))}function Bg(a){if(!g||Zb)return!1;if(!a)var a=window.event;return a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),Eg(),!1}function Cg(b){if(!g||Zb)return!1;if(!b)var b=window.event;return b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation(),zb&&"fullscreen"!=Dd&&Gg(),ub&&(Jc&&Jc.stopPreview(),Of(),"list"==C&&-1!=jc&&jc!=Me.getCounter()&&a(xd[jc])&&a(xd[jc]).removeClass("playlistSelected").addClass("playlistNonSelected")),!1}function Dg(b){if(!g||Zb)return!1;if(!b)var b=window.event;return b.cancelBubble?b.cancelBubble=!0:b.stopPropagation&&b.stopPropagation(),ub&&(Jc&&Jc.stopPreview(),Of(),"list"==C&&-1!=jc&&jc!=Me.getCounter()&&a(xd[jc])&&a(xd[jc]).removeClass("playlistSelected").addClass("playlistNonSelected")),!1}function Eg(){return"wall"==C?!1:(db.css("display","block"),bd?(K.css("display","block"),Og(),void 0):!1)}function Fg(){return"wall"==C?!1:(db.css("display","block"),bd?(K.css("display","block"),void 0):!1)}function Gg(){return"wall"==C?!1:(db.css("display","none"),K.css("display","none"),void 0)}function Hg(){if(Ig(),"fullscreen"==Dd?Jg():"local"==Cd?bd?v&&Rg():Qg(Tc):("youtube_single"==Cd||"youtube_playlist"==Cd)&&Rg(),Og(),Gd&&Ag(),Uc&&Vc){var a=0!=Ug("h")?Ug("h"):Wg();captionator.setHeight(a),captionator.setRedraw(!1)}}function Ig(){if(!Mb&&"list"==C){var b=0!=y.width()?y.width():Vg(),c=0!=y.height()?y.height():Wg(),d=H.width(),e=F.width();"vertical"==Cb&&("fullscreen"!=Dd?isiPhoneIpod?F.css({position:"relative",left:"0px",height:"250px","float":"right",clear:"both"}):d+e>b?F.css({position:"absolute",left:d-e+"px",height:c-K.height()+"px"}):F.css({position:"absolute",left:d+"px",height:c+"px"}):F.css({position:"fixed",left:b-e+"px",height:c-K.height()+"px"})),"horizontal"==Cb&&("fullscreen"==Dd?F.css("width",b+"px"):F.css("width","100%")),Rd=0;var g,f=0;for(f;yd>f;f++)g=a(xd[f]),Rd+="horizontal"==Cb?g.outerWidth(!0):g.outerHeight(!0);"buttons"==Db?("horizontal"==Cb?(Sd.css("left","0px"),D.width(Rd)):Sd.css("top","0px"),Ie()):"scroll"==Db&&("horizontal"==Cb&&gc.width(Rd),Je())}}function Jg(){pd&&clearTimeout(pd),k.unbind("mousemove",Lg),"fullscreen"==Dd?(i.css("overflow","hidden"),"list"==C&&H.removeClass("playerHolder").addClass("playerHolder_fs"),y.find(".player_adv").removeClass("player_adv").addClass("player_adv_fs"),isMobile?pd=setTimeout(function(){clearTimeout(pd),Mg()},od):(k.unbind("mousemove",Lg).bind("mousemove",Lg),pd=setTimeout(function(){clearTimeout(pd),Lg()},od)),Ob&&(Hf("off"),lc=kc),y.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-compress ap_fs_exit")):(i.css("overflow",Hd),"list"==C&&H.removeClass("playerHolder_fs").addClass("playerHolder"),y.find(".player_adv_fs").removeClass("player_adv_fs").addClass("player_adv"),y.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-expand ap_fs_ent")),Tc&&Qg(Tc),v&&Rg(),Gd&&Ag(),Og(),Eg(),Ig(),Uc&&Vc&&(Xc&&clearTimeout(Xc),Xc=setTimeout(Kg,Wc))}function Kg(){Xc&&clearTimeout(Xc);var a=0!=Ug("h")?Ug("h"):Wg();captionator.setHeight(a)}function Lg(a){return bd?(pd&&clearTimeout(pd),a&&(r!=a.clientX&&(Fg(),lc&&Hf("on")),r=a.clientX),pd=setTimeout(function(){Gg(),lc=kc,Hf("off")},od),void 0):!1}function Mg(){pd&&clearTimeout(pd),Gg(),lc=kc,Hf("off"),pd=setTimeout(function(){clearTimeout(pd),Mg()},od)}function Og(){Yd=Pg(),Zd=K.width(),$d=Zd-Yd-_d,M.width($d+_d-1),N.width($d)}function Pg(){var a="block"==I.css("display")?Dc:0;return b="block"==J.css("display")?Ec:0,c="block"==jb.css("display")?Fc:0,d="block"==T.css("display")?Gc:0,e="block"==U.css("display")?Hc:0,Bc&&(d=0),Cc+a+b+c+d+e}function Qg(a){if(!a)return!1;var b,c,d,e=0!=Ug("w")?Ug("w"):Vg(),f=0!=Ug("h")?Ug("h"):Wg();0==Kb?b=Tg():1==Kb?b=Sg(!0,a,pb,qb):2==Kb&&(b=Sg(!1,a,pb,qb)),c=parseInt((e-b.width)/2,10),d=parseInt((f-b.height)/2,10),a.css({width:b.width+"px",height:b.height+"px",left:c+"px",top:d+"px"})}function Rg(){if(-1==Me.getCounter())return!1;var a,b,c,d=0!=Ug("w")?Ug("w"):Vg(),e=0!=Ug("h")?Ug("h"):Wg();0==Kb?a=Tg():1==Kb?a=Sg(!0):2==Kb&&(a=Sg(!1)),b=parseInt((d-a.width)/2,10),c=parseInt((e-a.height)/2,10),"local"==Cd?Ed&&Ed.css({width:a.width+"px",height:a.height+"px",left:b+"px",top:c+"px"}):("youtube_single"==Cd||"youtube_playlist"==Cd)&&Y&&Y.css({width:a.width+"px",height:a.height+"px",left:b+"px",top:c+"px"})}function Sg(a,b,c,d){var i,j,e=0,f=0,g=0!=Ug("w")?Ug("w"):Vg(),h=0!=Ug("h")?Ug("h"):Wg(),k={};if(b)"undefined"!=typeof c&&"undefined"!=typeof d?(i=c,j=d):(i=b.width(),j=b.height());else{var b=Tg();i=b.width,j=b.height}var l=(g-e)/(h-f),m=i/j;return l>m?a?(k.width=(h-f)/j*i,k.height=h-f):(k.height=(g-e)/i*j,k.width=g-e):m>l?a?(k.height=(g-e)/i*j,k.width=g-e):(k.width=(h-f)/j*i,k.height=h-f):(k.width=g-e,k.height=h-f),k}function Tg(){var a={},b=640,c=360;return"local"==Cd?!Ad||isNaN(Ad)||!Bd||isNaN(Bd)?Fd?(a.width=Fd.videoWidth,a.height=Fd.videoHeight):(a.width=b,a.height=c):(a.width=Ad,a.height=Bd):("youtube_single"==Cd||"youtube_playlist"==Cd)&&(!Ad||isNaN(Ad)||!Bd||isNaN(Bd)?(a.width=b,a.height=c):(a.width=Ad,a.height=Bd)),a}function Ug(a){return"w"==a?"normal"==Dd?z.width():Vg():"normal"==Dd?z.height():Wg()}function Vg(){return Math.max(j.width(),document.documentElement.clientWidth)}function Wg(){return Math.max(j.height(),document.documentElement.clientHeight)}function Xg(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?y.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-expand ap_fs_ent"):y.find(".player_fullscreen").find("i").removeClass().addClass("fa fa-compress ap_fs_exit")}function Zg(b){y.parents().andSelf().map(function(){a(this).addClass("fullscreen-visible"),a(this).siblings().map(function(){b?(a(this).addClass("fullscreen-invisible").removeClass("fullscreen-visible"),F.addClass("fullscreen-invisible").removeClass("fullscreen-visible")):(a(this).addClass("fullscreen-visible").removeClass("fullscreen-invisible"),F.addClass("fullscreen-visible").removeClass("fullscreen-invisible"))})})}function $g(a){if(zc=0,Dd="normal"==Dd?"fullscreen":"normal",Xg(),Ac||v){var b=document.documentElement;if(b.requestFullscreen)document.fullscreenElement?(document.exitFullscreen(),Zg(!1)):(b.requestFullscreen(),Zg(!0));else if(b.webkitRequestFullScreen)document.webkitIsFullScreen?(document.webkitCancelFullScreen(),Zg(!1)):(b.webkitRequestFullScreen(),Zg(!0));else if(b.mozRequestFullScreen)document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreenElement?(document.mozCancelFullScreen(),Zg(!1)):(b.mozRequestFullScreen(),Zg(!0));else if(isIOS)try{}catch(c){}}Ac?"normal"==Dd&&a&&Jg():(Uc&&Vc&&captionator.setRedraw(!1),Jg())}function _g(){var a=!1;return document.documentElement.requestFullscreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0),document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||(document.documentElement.requestFullscreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullscreen&&(a=!0)),!0}function ah(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function bh(){I.find("p").html("00:00"),J.find("p").html("00:00"),P.width(0),O.width(0)}function ch(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/ogg; codecs="theora, vorbis"').replace(/no/,""))}function dh(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""))}function eh(){var a=document.createElement("video");return!(!a.canPlayType||!a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""))}function fh(a){return a=Math.round(a),minutes=Math.floor(a/60),minutes=minutes>=10?minutes:"0"+minutes,a=Math.floor(a%60),a=a>=10?a:"0"+a,minutes+":"+a}function gh(a){return a=Math.round(a),minutes=Math.floor(a/60),minutes=minutes>=10?minutes:"0"+minutes,a=Math.floor(a%60),a=a>=10?a:"0"+a,minutes+":"+a}var p,g=!1,i=a("body"),j=a(window),k=a(document),l=window.location.href,m="",n="",o="",q=!0;"ontouchstart"in window?(p=!0,m="touchstart.ap",n="touchmove.ap",o="touchend.ap"):(p=!1,m="mousedown.ap",n="mousemove.ap",o="mouseup.ap");var r=0,s=dh(),t=ch(),u=eh(),v=!!document.createElement("video").canPlayType,x=hap_source_path+f.buttonsUrl.thumbnailPreloaderUrl,y=a(this),z=y.find(".componentWrapper"),A=y.find(".componentPlaylist");y.find(".innerWrapper");var C=f.playlistType,D="list"==C?y.find(".playlist_inner"):z.find(".playlist_inner"),E=y.find(".playlist_content"),F=y.find(".playlistHolder"),G=y.find(".playlist_list"),H=y.find(".playerHolder"),I=y.find(".player_mediaTime_current"),J=y.find(".player_mediaTime_total"),K=y.find(".playerControls"),L=y.find(".player_toggleControl"),M=y.find(".player_seekbar"),N=y.find(".progress_bg"),O=y.find(".load_level"),P=y.find(".progress_level"),Q=y.find(".volume_seekbar").css("zIndex",300),R=y.find(".volume_bg"),S=y.find(".volume_level"),T=y.find(".player_fullscreen"),U=y.find(".player_captions"),V=y.find(".caption_holder").css("zIndex",301);isMobile||V.bind("mouseenter",function(){return!g||Zb?!1:($c&&clearTimeout($c),!1)}).bind("mouseleave",function(){return!g||Zb?!1:($c&&clearTimeout($c),$c=setTimeout(pg,Zc),!1)}),z.find(".caption_btn");var X=f.flashMain,Y=y.find(".youtubeIframeMain"),Z=f.flashPreview,$=y.find("#flashPreviewHolder"),_=y.find(".youtubeIframePreview").bind("click",function(){return kg(),!1});_.css({left:-_.width()+5+"px"}).bind("click",function(){return!1});var ab,H=y.find(".playerHolder"),bb=y.find(".mediaHolder").bind("click",function(){return!g||Zb?!1:(kg(),!1)}),cb=y.find(".mediaPreview").bind("click",function(){return!g||Zb?!1:(kg(),!1)}),db=y.find(".player_addon");y.find(".playlist_toggle"),y.find(".ap_share_btn");var gb=y.find(".ap_share_holder"),hb=y.find(".info_toggle"),ib=y.find(".infoHolder"),jb=y.find(".player_volume"),kb=y.find(".big_play").css("cursor","pointer").bind("click",function(){return!g||Zb?!1:(kg(),!1)}),lb=y.find(".info_inner"),mb=y.find(".preloader");y.find(".playlistControls");var ob,pb,qb,rb="/main/",sb=f.previewPath,tb=f.wallPath,ub=isMobile?!1:f.useLivePreview;ub||(y.find(".youtubeIframePreview").remove(),$.remove());var vb=f.autoPlay,wb=f.autoPlay,xb=f.autoPlay;isMobile&&(vb=!1,wb=!1);var yb=f.autoAdvanceToNextVideo,zb=isMobile?!1:!0,Ab=f.captionsBottomPadding,Bb=f.autoOpenDescription,Cb=f.playlistOrientation,Db=f.scrollType;f.autoOpenPlaylist;var Fb=f.randomPlay,Gb=f.loopingOn,Hb=f.autoMakePlaylistThumb,Ib=f.autoMakePlaylistInfo,Jb=f.useWebmVideoFormat,Kb=f.aspectRatio,Lb=f.layout100perc,Mb=f.playlistHidden,Nb=f.useYoutubeHighestQuality,Ob=f.closePlaylistOnFsEntry;Mb&&y.find(".playlist_toggle").remove(),"wall"==C&&(Mb=!1,Hb=!0,ef=-1),isMobile&&(Kb=1),isiPhoneIpod&&(ib.remove(),K.remove(),db.remove());var Pb,Rb,Sb,Wb,Xb,Yb,ec,fc,gc,hc,nc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,Bc,Qb=[],Tb=[],Ub=[],Vb=[],Zb=!1,$b=!1,_b=!1,ac=!1,ic=-1,jc=-1,kc="block"==F.css("display")?!0:!1,lc=kc,mc=[],oc=!1,zc=0,Ac=!1;_g()?Ac=!0:(isIE&&Lb||isMobile&&Lb)&&(Bc=!0,y.find(".player_fullscreen").remove()),isIOS&&y.find(".player_volume_wrapper").remove();var Ic,Jc,Mc,Oc,Sc,Tc,Xc,Yc,$c,ad,cd,dd,ed,fd,hd,id,kd,md,pd,rd,Ad,Bd,Cd,Ed,Fd,Id,Jd,Kd,Ld,Md,Nd,Rd,Sd,Cc=y.find(".player_toggleControl").outerWidth(!0),Dc=y.find(".player_mediaTime_current").outerWidth(!0),Ec=y.find(".player_mediaTime_total").outerWidth(!0),Fc=y.find(".player_volume_wrapper").outerWidth(!0),Gc=y.find(".player_fullscreen").outerWidth(!0),Hc=y.find(".player_captions").outerWidth(!0),Lc=[],Nc=50,Pc=!1,Qc=!1,Rc=!0,Uc=f.useCaptions,Vc=!1,Wc=100,Zc=2e3,_c=!1,bd=!1,gd=!1,jd=100,ld=100,nd=!1,od=f.controlsTimeout,qd=10,sd=[],td=[],ud=[],vd=[],wd=[],xd=[],yd=0,zd=!0,Dd="normal",Gd=!1,Hd=i.css("overflow"),Od=3;"wall"!=C&&"buttons"==Db&&(Sd=D,p&&De());var Ud,Td=[L,y.find(".player_fullscreen"),y.find(".playlist_toggle"),y.find(".ap_share_btn"),y.find(".info_toggle"),y.find(".player_volume"),y.find(".caption_btn"),y.find(".player_prev"),y.find(".player_next")],Vd=Td.length,Wd=0;for(Wd;Vd>Wd;Wd++)Ud=a(Td[Wd]).css("cursor","pointer").bind("click",Uf),!isMobile&&zd&&Ud.bind("mouseenter",Vf).bind("mouseleave",Wf);var Yd,Zd,$d,Xd=!1,_d=30;if(M.css("cursor","pointer").bind(m,function(a){return ae(a),!1}),!isMobile){var ee=y.find(".player_progress_tooltip").css({left:parseInt(M.css("left"),10)+"px",zIndex:302});M.bind("mouseover",fe)}var ke,ie=!0,je=f.defaultVolume;0>je&&(je=0),0==je?ke=.5:je>1&&(je=1),0!=je&&(ke=je);var le=!1,me=R.height();S.css("height",je*me+"px");var oe,ne=!1,pe=3e3;if(isMobile?jb.bind("click",function(){return g?(oe&&clearTimeout(oe),Uc&&Vc&&pg(),!1):!1}):jb.bind("mouseover",function(){return g?(oe&&clearTimeout(oe),Q.css("display","block"),ne=!0,Uc&&Vc&&pg(),!1):!1}).bind("mouseout",function(){return g?(oe&&clearTimeout(oe),oe=setTimeout(qe,pe),!1):!1}),0==je&&y.find(".player_volume").find("i").removeClass("fa-volume-up ap_vol_on ap_vol").addClass("fa-volume-off ap_mute"),Q.css("cursor","pointer").bind(m,function(a){return se(a),!1}),!isMobile){Q.bind("mouseover",Ae);var ye=z.find(".player_volume_tooltip"),ze=parseInt(ye.css("top"),10);ye.bind("mouseenter",function(){Q.unbind("mouseover",Ae),ye.css("display","none")}).bind("mouseleave",function(){Q.bind("mouseover",Ae)})}v||(s=!0);var Le={randomPlay:Fb,loopingOn:Gb},Me=a.playlistManager(Le);a(Me).bind("ap_PlaylistManager.COUNTER_READY",function(){Re?Ye?(Ye=!1,Tf(),$f()):(a.address.value(uf(Me.getCounter())),a.address.history()||a.address.history(!0)):(Tf(),$f())}),a(Me).bind("ap_PlaylistManager.PLAYLIST_END",function(){Tf(),videoGalleryPlaylistEnd()});var Oe,Ne=[];G.children("div[data-address]").each(function(){var b={};Oe=a(this),b.categoryName=Oe.attr("data-address"),b.id=Oe.attr("id"),Ne.push(b)});var Pe=!1,Qe=Ne.length,Re="wall"==C?!1:f.useDeeplink;if(Re){var Te,Ve,We,Xe,_e,af,Se=a.address.strict()?"#/":"#",Ue=!1,Ye=!1,Ze=!1,$e=500,bf=f.activePlaylist;ah(bf)||ah(f.activeItem)||(bf+="/"+f.activeItem);var cf,df,ef,gf,hf,ff=100;a.address.internalChange(function(a){a.stopPropagation(),hf&&clearTimeout(hf),qf(a)}),a.address.externalChange(function(b){if(b.stopPropagation(),hf&&clearTimeout(hf),af=b,Zb)_e&&clearTimeout(_e),gf&&clearInterval(gf),gf=setInterval(kf,ff);else{if(!Ze)return"/"==b.value?(Ye=!0,a.address.history(!1),ah(bf)||(a.address.value(bf),a.address.history()||a.address.history(!0))):ah(b.value)?(Ye=!0,a.address.history(!1),ah(bf)||(a.address.value(bf),a.address.history()||a.address.history(!0))):qf(b),void 0;_e&&clearTimeout(_e),_e=setTimeout(mf,$e)}})}else Yb=f.activePlaylist,wf();return this.flashPreviewVideoStart2=function(){xc&&xc.css("display","none")},this.flashPreviewVideoStart=function(){kd&&clearInterval(kd),kd=setInterval(If,jd)},this.flashVideoPause=function(){ig()},this.flashVideoResume=function(){hg()},this.flashVideoEnd=function(){Xf()},this.flashVideoStart=function(){bd=!0,hg(),Eg(),xg()},this.dataUpdateFlash=function(a,b,c,d){O.width(a/b*$d),P.width(c/d*$d),I.html(fh(c)),J.html(gh(d))},"wall"!=C&&j.resize(function(){return!g||Zb?!1:(Hg(),void 0)}),isMobile&&j.doubletap(function(){setTimeout(function(){clearTimeout(a(this)),Hg()},1e3)}),isMobile&&k.bind("touchend.ap2",function(){"fullscreen"==Dd&&(pd&&clearTimeout(pd),Fg(),lc&&Hf("on"),pd=setTimeout(function(){clearTimeout(pd),Mg()},od))}),"wall"!=C&&Ac&&k.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){Xg(),"fullscreen"==Dd&&zc>0&&(Dd="normal",Jg(),Zg(!1)),zc=1,Uc&&Vc&&captionator.setRedraw(!1)}),this.getVolume=function(){return!g||Zb?!1:je},this.togglePlayback=function(){return!g||Zb?!1:"wall"==C?!1:Cd?(kg(),void 0):!1},this.nextMedia=function(){return!g||Zb?!1:"wall"==C?!1:(Xf(),void 0)},this.previousMedia=function(){return!g||Zb?!1:"wall"==C?!1:(Yf(),void 0)},this.setVolume=function(a){return!g||Zb?!1:"wall"==C?!1:bd?(0>a?a=0:a>1&&(a=1),je=a,xe(),void 0):!1},this.destroyMedia=function(){return!g||Zb?!1:"wall"==C?!1:(Zf(),void 0)},this.togglePlaylist=function(a){return!g||Zb?!1:"wall"==C?!1:(Hf(a),void 0)},this.toggleDescription=function(){return!g||Zb?!1:"wall"==C?!1:-1==Me.getCounter()?!1:(zg(),void 0)},this.loadMedia=function(b){if(!g||Zb)return!1;if("wall"!=C)if(Re){if("string"!=typeof b)return alert("Invalid value loadMedia Deeplink!"),!1;a.address.value(b)}else if("number"==typeof b)0>b?b=0:b>yd-1&&(b=yd-1),Sf(),Me.processPlaylistRequest(b);else{if("string"!=typeof b)return alert("Invalid value loadMedia no Deeplink!"),!1;if(Yb==b)return!1;Yb=b,wf()}else{if("string"!=typeof b)return alert("Invalid value loadMedia Wall Layout!"),!1;if(Yb==b)return!1;Yb=b,wf()}},this.loadTrack=function(a){return!g||Zb?!1:"wall"==C?(alert("loadTrack method is not available for wall layout! Quitting."),!1):(a.thumb,void 0)},this.cleanPreviewVideo=function(){return!g||Zb?!1:ub?(Of(),void 0):!1},this.outputPlaylistData=function(){if(!g)return!1;if(Zb)return!1;if(!gc)return!1;try{console.log(Ub)}catch(a){}},this}}(jQuery);